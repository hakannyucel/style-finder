(()=>{"use strict";({383:function(){var t=this&&this.__awaiter||function(t,o,e,n){return new(e||(e=Promise))((function(r,s){function l(t){try{i(n.next(t))}catch(t){s(t)}}function a(t){try{i(n.throw(t))}catch(t){s(t)}}function i(t){var o;t.done?r(t.value):(o=t.value,o instanceof e?o:new e((function(t){t(o)}))).then(l,a)}i((n=n.apply(t,o||[])).next())}))};let o=null;figma.showUI(__html__,{width:400,height:295}),figma.ui.onmessage=t=>{"log"===t.type&&console.log(t.text)},figma.ui.onmessage=e=>t(void 0,void 0,void 0,(function*(){if("extract"===e.type){figma.notify("Get Styles butonuna tıklandı!"),console.log("Get Styles butonuna tıklandı!"),console.log("İşlem başlatılıyor: "+(new Date).toLocaleString());const n=e.url||"";if(!n||""===n.trim())return figma.ui.postMessage({type:"validation-error",field:"url"}),void console.log("Hata: URL boş!");console.log("İşlenecek URL: "+n);try{o=yield function(o){return t(this,void 0,void 0,(function*(){if(!o||""===o.trim())throw new Error("URL boş olamaz");o.startsWith("http://")||o.startsWith("https://")||(o="https://"+o),console.log("Fetch işlemi başlatılıyor:",o);const t=[t=>`https://corsproxy.io/?${encodeURIComponent(t)}`,t=>`https://api.allorigins.win/raw?url=${encodeURIComponent(t)}`,t=>`https://cors-anywhere.herokuapp.com/${t}`];let e="",n=null;for(let r=0;r<t.length;r++)try{const n=t[r](o);console.log(`CORS proxy ${r+1} deneniyor:`,n);const s=yield fetch(n,{method:"GET",headers:{Accept:"text/html,application/xhtml+xml,application/xml","User-Agent":"Mozilla/5.0 Figma Plugin"}});if(!s.ok)throw new Error(`HTTP error! Status: ${s.status}`);console.log("Fetch başarılı, status:",s.status),e=yield s.text(),console.log("HTML içeriği alındı, uzunluk:",e.length);break}catch(o){if(console.error(`CORS proxy ${r+1} başarısız:`,o),n=o instanceof Error?o:new Error(String(o)),r===t.length-1)throw new Error(`Tüm CORS proxy'ler başarısız oldu: ${n.message}`);continue}if(!e||0===e.length)throw new Error("HTML içeriği alınamadı");const r=e.match(/#(?:[0-9a-fA-F]{3}){1,2}\b/g)||[];console.log("Bulunan hex renk sayısı:",r.length);const s=e.match(/rgb\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*\)/gi)||[],l=e.match(/rgba\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*,\s*[\d.]+\s*\)/gi)||[];console.log("Bulunan RGB renk sayısı:",s.length),console.log("Bulunan RGBA renk sayısı:",l.length);const a=/font-family\s*:\s*([^;"}]+)/gi,i=/font-size\s*:\s*([^;"}]+)/gi,c=/font-weight\s*:\s*([^;"}]+)/gi,g=/line-height\s*:\s*([^;"}]+)/gi;let u,h=[],m=[],f=[],y=[];for(;null!==(u=a.exec(e));)h.push(u[1].trim());for(;null!==(u=i.exec(e));)m.push(u[1].trim());for(;null!==(u=c.exec(e));)f.push(u[1].trim());for(;null!==(u=g.exec(e));)y.push(u[1].trim());const d=[...r,...s,...l];console.log("Toplam tekrarsız renk sayısı:",new Set(d).size);const p={colors:Array.from(new Set(d)),fonts:Array.from(new Set(h)),fontSizes:Array.from(new Set(m))};return console.log("Extraction tamamlandı:",p),p}))}(n),figma.ui.postMessage({type:"result",data:o}),console.log("Extracted styles:",o),console.log("İşlem başarıyla tamamlandı: "+(new Date).toLocaleString()),figma.notify("Stiller başarıyla çıkarıldı!",{timeout:2e3})}catch(t){const e=t instanceof Error?t.message:String(t);console.log("Hata oluştu:",e),figma.ui.postMessage({type:"error",message:e,details:t instanceof Error?t.stack:"Detay yok"}),figma.notify("Hata: "+e,{error:!0}),o=null}}}))}})[383]()})();
//# sourceMappingURL=code.js.map